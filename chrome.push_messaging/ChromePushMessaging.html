        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>ChromePushMessaging class / chrome.push_messaging Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="chrome.push_messaging" data-type="ChromePushMessaging">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../chrome.push_messaging.html">chrome.push_messaging</a> &rsaquo; <a href="../chrome.push_messaging/ChromePushMessaging.html">ChromePushMessaging</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>ChromePushMessaging</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>Use chrome.pushMessaging to send message data to app or extension users.</p>
<pre class="source">
class ChromePushMessaging {
 StreamController&lt;PushMessage&gt; _streamController = new StreamController&lt;PushMessage&gt;();
 Stream&lt;PushMessage&gt; _stream;

 ChromePushMessaging._();

 /**
  * Retrieves the channel ID associated with this app or extension. Typically
  * an app or extension will want to send this value to its application server
  * so the server can use it to trigger push messages back to the app or
  * extension. If the interactive flag is set, we will ask the user to log in
  * when they are not already logged in.
  *
  * Returns the channel ID for this app to use for push messaging.
  */
 Future&lt;String&gt; getChannelId(bool interactive) {
   ChromeCompleter completer = new ChromeCompleter.oneArg();

   js.scoped(() {
     chromeProxy.pushMessaging.getChannelId(interactive, completer.callback);
   });

   return completer.future;
 }

 /**
  * Fired when a push message has been received.
  */
 Stream&lt;PushMessage&gt; get onMessage {
   if (_stream == null) {
     _stream = _streamController.stream.asBroadcastStream();

     js.scoped(() {
       js.Callback callback = new js.Callback.many((var message) {
         _streamController.add(
             // TODO: test that this correctly pulls the params out of the JS
             // object.
             new PushMessage(message['subchannelId'], message['payload']));
       });

       chromeProxy.pushMessaging.onMessage.addListener(callback);
     });
   }

   return _stream;
 }
}
</pre>
</div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="onMessage">
<button class="show-code">Code</button>
final Stream&lt;<a href="../chrome.push_messaging/PushMessage.html">PushMessage</a>&gt;         <strong>onMessage</strong> <a class="anchor-link"
            href="#onMessage"
            title="Permalink to ChromePushMessaging.onMessage">#</a>
        </h4>
        <div class="doc">
<p>Fired when a push message has been received.</p>
<pre class="source">
Stream&lt;PushMessage&gt; get onMessage {
 if (_stream == null) {
   _stream = _streamController.stream.asBroadcastStream();

   js.scoped(() {
     js.Callback callback = new js.Callback.many((var message) {
       _streamController.add(
           // TODO: test that this correctly pulls the params out of the JS
           // object.
           new PushMessage(message['subchannelId'], message['payload']));
     });

     chromeProxy.pushMessaging.onMessage.addListener(callback);
   });
 }

 return _stream;
}
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="getChannelId">
<button class="show-code">Code</button>
Future&lt;String&gt; <strong>getChannelId</strong>(bool interactive) <a class="anchor-link" href="#getChannelId"
              title="Permalink to ChromePushMessaging.getChannelId">#</a></h4>
<div class="doc">
<p>Retrieves the channel ID associated with this app or extension. Typically
an app or extension will want to send this value to its application server
so the server can use it to trigger push messages back to the app or
extension. If the interactive flag is set, we will ask the user to log in
when they are not already logged in.</p>
<p>Returns the channel ID for this app to use for push messaging.</p>
<pre class="source">
Future&lt;String&gt; getChannelId(bool interactive) {
 ChromeCompleter completer = new ChromeCompleter.oneArg();

 js.scoped(() {
   chromeProxy.pushMessaging.getChannelId(interactive, completer.callback);
 });

 return completer.future;
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-09-10 17:13:50.384</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
